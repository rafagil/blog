angular.module("rafaelgil.blog.services",["restangular"]).config(["RestangularProvider",function(t){t.setBaseUrl("/api")}]),angular.module("rafaelgil.blog.services").factory("PostsService",["Restangular",function(t){"use strict";var e={};return e.list=function(){return t.all("posts").getList()},e.create=function(e){return t.all("posts").post(e)},e.update=function(t){return t.put()},e}]),angular.module("rafaelgil.blog",["ui.router","rafaelgil.blog.services"]).config(["$httpProvider","$stateProvider","$locationProvider","$urlRouterProvider",function(t,e,n,r){"use strict";var o=window.navigator.userAgent,i=o.indexOf("MSIE ")>=0;n.html5Mode(!i),e.state("posts",{url:"/",templateUrl:"views/posts.html",controller:"PostsController"}),r.otherwise("/")}]),angular.module("rafaelgil.blog").controller("PostsController",["$scope","PostsService",function(t,e){"use strict";t.posts=[];var n,r=function(){e.list().then(function(e){t.posts=e})};t.create=function(){t.showAdd=!0,n?n.rebuild():n=new Pen({editor:document.querySelector("#create"),list:["bold","italic","underline"]})},t.insert=function(){e.create({title:t.newTitle,content:n.getContent(),summary:n.getContent()}).then(function(){r(),t.showAdd=!1,n.destroy()})},t.edit=function(t){t.editor=new Pen("#post_"+t.id),t.editing=!0},t.save=function(t){var n=t.editor;delete t.editor,t.content=n.getContent(),t.summary=t.content,e.update(t).then(function(){n.destroy(),t.editing=!1})};var o=function(){r()};o()}]);